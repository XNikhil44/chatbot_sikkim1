<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sikkim Tourism Chatbot</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background: linear-gradient(to right, #e0f7fa, #fff3e0);
      color: #333;
    }

    header {
      background: #00695c;
      color: white;
      padding: 20px;
      text-align: center;
    }

    nav {
      background: #004d40;
      text-align: center;
      padding: 10px;
    }

    nav a {
      color: white;
      text-decoration: none;
      margin: 0 15px;
      font-weight: bold;
    }

    nav a:hover {
      text-decoration: underline;
    }

    main {
      padding: 30px;
      text-align: center;
    }

    .tourism-img {
      width: 100%;
      max-height: 400px;
      object-fit: cover;
      border-radius: 12px;
      margin: 20px 0;
      box-shadow: 0px 4px 8px rgba(0,0,0,0.3);
    }

    footer {
      background: #00695c;
      color: white;
      text-align: center;
      padding: 15px;
      margin-top: 30px;
    }

    /* Chat UI */
    #chat-container {
      position: fixed;
      bottom: 90px;
      right: 20px;
      width: 350px;
      height: 450px;
      background: white;
      border-radius: 12px;
      box-shadow: 0px 4px 12px rgba(0,0,0,0.4);
      display: none;
      flex-direction: column;
      overflow: hidden;
      z-index: 1000;
    }

    #chatBox {
      flex: 1;
      padding: 10px;
      overflow-y: auto;
      font-size: 14px;
    }

    #chatBox div {
      margin: 5px 0;
    }

    #chatInputArea {
      display: flex;
      border-top: 1px solid #ddd;
    }

    #userInput {
      flex: 1;
      padding: 10px;
      border: none;
      outline: none;
    }

    #sendBtn {
      background: #25d366;
      border: none;
      padding: 10px 15px;
      cursor: pointer;
      color: white;
      font-weight: bold;
    }

    /* Floating Buttons */
    .btn {
      position: fixed;
      right: 20px;
      border: none;
      border-radius: 50%;
      width: 60px;
      height: 60px;
      font-size: 24px;
      cursor: pointer;
      box-shadow: 0px 4px 8px rgba(0,0,0,0.3);
      color: white;
      z-index: 1001;
    }

    #chatBtn {
      bottom: 20px;
      background: #25d366;
    }

    #micBtn {
      bottom: 90px;
      background: #ff5722;
    }
  </style>
</head>
<body>

  <!-- Header -->
  <header>
    <h1>Welcome to Sikkim Tourism</h1>
    <p>Explore the beauty of the Himalayas with our smart chatbot guide</p>
  </header>

  <!-- Navbar -->
  <nav>
    <a href="#">Home</a>
    <a href="#">Places</a>
    <a href="#">Culture</a>
    <a href="#">Contact</a>
  </nav>

  <!-- Main Content -->
  <main>
    <h2>Discover Sikkim</h2>
    <img src="https://upload.wikimedia.org/wikipedia/commons/f/fd/Tsomgo_Lake%2C_Sikkim.jpg" 
         alt="Sikkim Tourism" class="tourism-img">
    <p>
      Sikkim is a small but breathtakingly beautiful state in India, known for its majestic Himalayas, 
      rich culture, monasteries, and natural wonders. Our chatbot will guide you through your journey, 
      answer your queries, and suggest the best places to explore.
    </p>
  </main>

  <!-- Footer -->
  <footer>
    <p>&copy; 2025 Sikkim Tourism | All Rights Reserved</p>
  </footer>

  <!-- Floating Buttons -->
  <button id="micBtn" class="btn">ðŸŽ¤</button>
  <button id="chatBtn" class="btn">ðŸ’¬</button>

  <!-- Chat Container -->
  <div id="chat-container">
    <div id="chatBox"></div>
    <div id="chatInputArea">
      <input type="text" id="userInput" placeholder="Type a message...">
      <button id="sendBtn">Send</button>
    </div>
  </div>

  <script>
    const chatBtn = document.getElementById("chatBtn");
    const chatContainer = document.getElementById("chat-container");
    const sendBtn = document.getElementById("sendBtn");
    const userInput = document.getElementById("userInput");
    const chatBox = document.getElementById("chatBox");

    chatBtn.onclick = () => {
      chatContainer.style.display = 
        chatContainer.style.display === "flex" ? "none" : "flex";
    };

    async function sendToBot(message) {
      if (!message.trim()) return;

      chatBox.innerHTML += `<div><b>You:</b> ${message}</div>`;
      userInput.value = "";
      chatBox.scrollTop = chatBox.scrollHeight;

      try {
        const response = await fetch("https://www.chatbase.co/api/get-response", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "Authorization": "Bearer YOUR_API_KEY" // ðŸ”‘ Replace with your Chatbase API key
          },
          body: JSON.stringify({
            chatbotId: "WXJl80MOoH850gYH_yXdl", // your chatbot ID
            messages: [{ role: "user", content: message }]
          })
        });

        const data = await response.json();
        const botReply = data.output || "Sorry, I couldn't understand that.";

        chatBox.innerHTML += `<div><b>Bot:</b> ${botReply}</div>`;
        chatBox.scrollTop = chatBox.scrollHeight;

        // ðŸ”Š Speak the bot reply
        const speech = new SpeechSynthesisUtterance(botReply);
        speech.lang = "en-US"; // set "hi-IN" for Hindi
        window.speechSynthesis.speak(speech);

      } catch (error) {
        console.error("Error:", error);
        chatBox.innerHTML += `<div style="color:red;"><b>Bot:</b> Error connecting to server.</div>`;
      }
    }

    sendBtn.onclick = () => sendToBot(userInput.value);
    userInput.addEventListener("keypress", e => {
      if (e.key === "Enter") sendToBot(userInput.value);
    });

    // ðŸŽ¤ Voice Input
    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
    const recognition = new SpeechRecognition();
    recognition.lang = "en-US";
    recognition.interimResults = false;

    document.getElementById("micBtn").onclick = () => recognition.start();

    recognition.onresult = function (event) {
      const voiceMessage = event.results[0][0].transcript;
      sendToBot(voiceMessage);
    };
  </script>

</body>
</html>
